<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏±‡∏ò‡∏¢‡∏° ‚Äî Modern Blue-Purple</title>
  <meta name="description" content="‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏±‡∏ò‡∏¢‡∏° ‚Äî ‡πÇ‡∏ó‡∏ô‡∏ü‡πâ‡∏≤-‡∏°‡πà‡∏ß‡∏á‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏• ‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö dark mode ‡πÅ‡∏•‡∏∞ responsive" />
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-1: #f4f9ff; /* page bg */
      --card: #ffffff;
      --muted: #6b7280;
      --accent-1: #7dd3fc; /* sky */
      --accent-2: #a78bfa; /* purple */
      --glass: rgba(255,255,255,0.6);
      --radius: 14px;
      --shadow: 0 12px 30px rgba(12,16,30,0.08);
      --max-width: 1180px;
    }
    [data-theme="dark"]{
      --bg-1: linear-gradient(180deg,#071025 0%, #061028 100%);
      --card:#091427; --muted:#9aa4b2; --glass: rgba(255,255,255,0.03);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{font-family:'Prompt', 'Poppins', system-ui, -apple-system, sans-serif;margin:0;background:var(--bg-1);color:#051423;-webkit-font-smoothing:antialiased}
    .wrap{max-width:var(--max-width);margin:28px auto;padding:20px}

    /* Header */
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;gap:14px;align-items:center}
    .logo{width:72px;height:72px;border-radius:16px;background:linear-gradient(135deg,var(--accent-1),var(--accent-2));display:grid;place-items:center;color:white;font-weight:800;font-size:28px;box-shadow:var(--shadow)}
    .logo small{display:block;font-size:11px;opacity:0.9}
    .title h1{margin:0;font-size:20px}
    .title p{margin:2px 0 0;color:var(--muted);font-size:13px}

    /* Controls */
    .controls{display:flex;align-items:center;gap:12px}
    .search{display:flex;align-items:center;background:var(--card);padding:10px 12px;border-radius:999px;box-shadow:0 6px 18px rgba(10,10,40,0.06);width:420px;border:1px solid rgba(10,10,30,0.03)}
    .search input{border:0;background:transparent;outline:none;font-size:14px;width:100%}
    .btn{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:white;padding:10px 14px;border-radius:12px;border:0;cursor:pointer;font-weight:600}
    .icon-btn{background:transparent;border:0;padding:8px;border-radius:8px;cursor:pointer}

    main{display:grid;grid-template-columns:1fr 340px;gap:24px;margin-top:20px}

    /* grid of cards */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px}
    .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px;transform:translateY(0);transition:transform .26s ease,box-shadow .26s ease;opacity:0;transform-origin:center}
    .card.visible{opacity:1;transform:translateY(0)}
    .card:hover{transform:translateY(-10px)}
    .meta{font-size:12px;color:var(--muted)}
    .card h3{margin:0;font-size:16px}
    .excerpt{color:var(--muted);font-size:13px}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{background:linear-gradient(90deg,#fff,#fafcff);padding:6px 10px;border-radius:999px;font-size:12px;border:1px solid rgba(10,10,30,0.03);cursor:pointer}

    .card-footer{display:flex;justify-content:space-between;align-items:center;margin-top:auto}

    /* sidebar */
    .sidebar{position:sticky;top:22px}
    .panel{background:var(--card);padding:14px;border-radius:12px;box-shadow:var(--shadow);margin-bottom:14px}
    .subjects{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .subject{display:flex;gap:10px;align-items:center;padding:10px;border-radius:10px;cursor:pointer;border:1px solid rgba(10,10,30,0.03)}
    .subject .dot{width:44px;height:44px;border-radius:10px;display:grid;place-items:center;font-weight:700}

    /* footer */
    footer{text-align:center;color:var(--muted);font-size:13px;margin-top:22px}

    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.45);display:none;align-items:center;justify-content:center;padding:20px;z-index:60}
    .modal{width:100%;max-width:920px;background:var(--card);border-radius:12px;padding:18px;box-shadow:0 30px 60px rgba(2,6,23,0.45);max-height:86vh;overflow:auto}

    /* small helpers */
    .top-btn{position:fixed;right:18px;bottom:18px;background:linear-gradient(90deg,var(--accent-2),var(--accent-1));border-radius:999px;padding:10px 12px;color:white;border:0;box-shadow:0 10px 30px rgba(2,6,23,0.18);cursor:pointer}

    @media (max-width:1024px){main{grid-template-columns:1fr} .search{width:100%}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">‡∏Ñ<small>KNOW</small></div>
        <div class="title"><h1>‡∏Ñ‡∏•‡∏±‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏ô‡πâ‡∏≠‡∏á‡∏°‡∏±‡∏ò‡∏¢‡∏°</h1><p class="lead">‡∏™‡∏£‡∏∏‡∏õ ‡∏™‡∏≠‡∏ô ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î ‚Äî ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≠‡∏ö‡πÑ‡∏ß</p></div>
      </div>

      <div class="controls">
        <div class="search" role="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M21 21l-4.35-4.35" stroke="#9CA3AF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16z" stroke="#9CA3AF" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <input id="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤: ‡∏ß‡∏¥‡∏ä‡∏≤/‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ ‡πÄ‡∏ä‡πà‡∏ô '‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì'" aria-label="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤" />
        </div>
        <button class="btn" id="new-article">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°</button>
        <button class="icon-btn" id="theme-toggle" title="Toggle theme">üåô</button>
      </div>
    </header>

    <main>
      <section>
        <div class="panel" style="margin-bottom:12px;display:flex;justify-content:space-between;align-items:center">
          <div><strong id="result-count">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</strong> <span id="active-filter" style="color:var(--muted);font-size:13px;margin-left:8px">(‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)</span></div>
          <div style="display:flex;gap:8px;align-items:center"><label style="color:var(--muted);font-size:13px">‡πÄ‡∏£‡∏µ‡∏¢‡∏á</label><select id="sort"><option value="new">‡πÉ‡∏´‡∏°‡πà‡∏™‡∏∏‡∏î</option><option value="popular">‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°</option><option value="alpha">‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß</option></select></div>
        </div>

        <div class="grid" id="articles"></div>
      </section>

      <aside class="sidebar">
        <div class="panel">
          <h3>‡∏´‡∏°‡∏ß‡∏î‡∏ß‡∏¥‡∏ä‡∏≤</h3>
          <div class="subjects" id="subjects"></div>
        </div>

        <div class="panel">
          <h3>‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h3>
          <div id="popular-list" style="display:flex;flex-direction:column;gap:8px"></div>
        </div>

        <div class="panel">
          <h3>‡∏ö‡∏∏‡πä‡∏Å‡∏°‡∏≤‡∏£‡πå‡∏Å</h3>
          <div id="bookmarks" style="color:var(--muted);font-size:14px">(‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)</div>
        </div>
      </aside>
    </main>

    <footer>‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå Modern ‚Ä¢ ‡πÇ‡∏ó‡∏ô‡∏ü‡πâ‡∏≤‚Äì‡∏°‡πà‡∏ß‡∏á‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏• ‚Äî ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</footer>
  </div>

  <div class="modal-backdrop" id="backdrop" aria-hidden="true"><div class="modal" role="document"><div style="display:flex;justify-content:space-between;align-items:center"><h2 id="modal-title">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</h2><button id="close" style="border:0;background:transparent;cursor:pointer">‡∏õ‡∏¥‡∏î ‚úï</button></div><div id="modal-body" style="margin-top:12px;color:var(--muted)"></div></div></div>

  <button class="top-btn" id="to-top">‚¨ÜÔ∏è</button>

  <script>
    // Data ‚Äî replace with API in production
    const sampleArticles = [
      {id:1,title:'‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥: ‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå',subject:'‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå',tags:['‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì','‡∏™‡∏π‡∏ï‡∏£'],date:'2025-06-12',popular:320,excerpt:'‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏π‡∏ï‡∏£‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î'},
      {id:2,title:'‡πÅ‡∏£‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà (‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå)',subject:'‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå',tags:['‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå','‡πÅ‡∏£‡∏á'],date:'2025-04-20',popular:210,excerpt:'‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏¥‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÅ‡∏£‡∏á ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î'},
      {id:3,title:'‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏±‡∏ö‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏° (‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©)',subject:'‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©',tags:['reading','exam'],date:'2025-02-10',popular:410,excerpt:'‡∏ß‡∏¥‡∏ò‡∏µ‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏±‡∏ö‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏Å‡∏≠‡∏≠‡∏Å‡∏™‡∏≠‡∏ö'}
    ];
    const subjects = ['‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î','‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©','‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢','‡∏™‡∏±‡∏á‡∏Ñ‡∏°','‡∏®‡∏¥‡∏•‡∏õ‡∏∞'];

    // DOM
    const articlesEl = document.getElementById('articles');
    const subjectsEl = document.getElementById('subjects');
    const popularList = document.getElementById('popular-list');
    const bookmarksEl = document.getElementById('bookmarks');
    const resultCount = document.getElementById('result-count');
    const activeFilter = document.getElementById('active-filter');
    const searchInput = document.getElementById('search');
    const sortSelect = document.getElementById('sort');

    let currentSubject = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
    let articles = [...sampleArticles];

    // bookmarks in localStorage
    function getBookmarks(){try{return JSON.parse(localStorage.getItem('mk_bookmarks')||'[]')}catch(e){return []}}
    function saveBookmarks(list){localStorage.setItem('mk_bookmarks',JSON.stringify(list)); renderBookmarks();}
    function renderBookmarks(){const list=getBookmarks(); bookmarksEl.innerHTML=''; if(!list.length){bookmarksEl.textContent='(‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)';return} list.forEach(id=>{const a=articles.find(x=>x.id===id); if(!a) return; const d=document.createElement('div'); d.style.display='flex'; d.style.justifyContent='space-between'; d.style.alignItems='center'; d.innerHTML=`<div style="font-size:14px">${a.title}</div><div style='display:flex;gap:8px'><button data-id='${id}' class='bm-open' style='background:transparent;border:0;color:var(--muted);cursor:pointer'>‡πÄ‡∏õ‡∏¥‡∏î</button><button data-id='${id}' class='bm-remove' style='background:transparent;border:0;color:var(--muted);cursor:pointer'>‡∏•‡∏ö</button></div>`; bookmarksEl.appendChild(d);}); document.querySelectorAll('.bm-open').forEach(b=>b.addEventListener('click',e=>openArticleById(+e.target.dataset.id))); document.querySelectorAll('.bm-remove').forEach(b=>b.addEventListener('click',e=>{const id=+e.target.dataset.id; saveBookmarks(getBookmarks().filter(x=>x!==id));}));}

    // render subjects
    function renderSubjects(){subjectsEl.innerHTML=''; subjects.forEach(s=>{const el=document.createElement('div'); el.className='subject'; el.dataset.sub=s; const dot=document.createElement('div'); dot.className='dot'; const map={'‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå':'linear-gradient(135deg,#7dd3fc,#60a5fa)','‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå':'linear-gradient(135deg,#86efac,#34d399)','‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©':'linear-gradient(135deg,#a78bfa,#7c3aed)','‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢':'linear-gradient(135deg,#fde68a,#fb923c)','‡∏™‡∏±‡∏á‡∏Ñ‡∏°':'linear-gradient(135deg,#c7b3ff,#7c3aed)','‡∏®‡∏¥‡∏•‡∏õ‡∏∞':'linear-gradient(135deg,#ffd1dc,#ff9aa2)','‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î':'linear-gradient(135deg,#eef2ff,#fff)'}; dot.style.background = map[s]||'linear-gradient(135deg,#eef2ff,#fff)'; dot.textContent = s==='‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'?'ALL':s.slice(0,2); el.appendChild(dot); const txt=document.createElement('div'); txt.innerHTML=`<div style='font-weight:600'>${s}</div><div style='font-size:13px;color:var(--muted)'>${articles.filter(a=>s==='‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'?true:a.subject===s).length} ‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°</div>`; el.appendChild(txt); el.addEventListener('click',()=>{currentSubject=s; filterAndRender(); document.querySelectorAll('.subject').forEach(x=>x.style.outline=''); el.style.outline='3px solid rgba(99,102,241,0.12)';}); subjectsEl.appendChild(el);});}

    // render articles (with simple reveal)
    function renderArticles(list){articlesEl.innerHTML=''; if(!list.length){articlesEl.innerHTML=`<div style='color:var(--muted)'>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°</div>`; resultCount.textContent='‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£'; return} list.forEach((a,i)=>{const el=document.createElement('article'); el.className='card'; el.dataset.id=a.id; el.innerHTML=`<div class='meta'>${a.subject} ‚Ä¢ ${a.date}</div><h3>${a.title}</h3><div class='excerpt'>${a.excerpt}</div><div class='chips'>${a.tags.map(t=>`<span class='chip' data-tag='${t}'>#${t}</span>`).join('')}</div><div class='card-footer'><div style='color:var(--muted);font-size:13px'>üëÅÔ∏è ${a.popular}</div><div><button class='bookmark' data-id='${a.id}' style='background:transparent;border:0;cursor:pointer'>üîñ</button> <button class='btn open' data-id='${a.id}'>‡∏≠‡πà‡∏≤‡∏ô</button></div></div>`; articlesEl.appendChild(el); // reveal animation setTimeout(()=>el.classList.add('visible'), i*80);});

      // attach events
      document.querySelectorAll('.open').forEach(b=>b.addEventListener('click',e=>openArticleById(+e.target.dataset.id)));
      document.querySelectorAll('.bookmark').forEach(b=>b.addEventListener('click',e=>{const id=+e.target.dataset.id; const list=getBookmarks(); if(list.includes(id)){ saveBookmarks(list.filter(x=>x!==id)); e.target.textContent='üîñ'; } else { list.push(id); saveBookmarks(list); e.target.textContent='‚úÖ'; }}));
      document.querySelectorAll('.chip').forEach(c=>c.addEventListener('click',e=>{searchInput.value = e.target.dataset.tag; filterAndRender(); }));

      resultCount.textContent = `‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${list.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
    }

    function renderPopular(){const top=[...articles].sort((a,b)=>b.popular-a.popular).slice(0,4); popularList.innerHTML=''; top.forEach(a=>{const d=document.createElement('div'); d.style.display='flex'; d.style.justifyContent='space-between'; d.style.alignItems='center'; d.innerHTML=`<div style='font-weight:600'>${a.title}</div><button data-id='${a.id}' style='background:transparent;border:0;color:var(--muted);cursor:pointer' class='pop-open'>‡πÄ‡∏õ‡∏¥‡∏î</button>`; popularList.appendChild(d);}); document.querySelectorAll('.pop-open').forEach(b=>b.addEventListener('click',e=>openArticleById(+e.target.dataset.id))); }

    // filter and sort
    function filterAndRender(){const q=searchInput.value.trim().toLowerCase(); let list=articles.filter(a=>{const subMatch = currentSubject==='‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'?true: a.subject===currentSubject; const qMatch = !q?true: (a.title.toLowerCase().includes(q) || a.tags.join(',').toLowerCase().includes(q) || a.excerpt.toLowerCase().includes(q)); return subMatch && qMatch; }); const sort = sortSelect.value; if(sort==='popular') list.sort((a,b)=>b.popular-a.popular); else if(sort==='alpha') list.sort((a,b)=>a.title.localeCompare(b.title,'th')); else list.sort((a,b)=>new Date(b.date)-new Date(a.date)); renderArticles(list); renderPopular(); }

    // modal
    const backdrop = document.getElementById('backdrop'); const modalTitle = document.getElementById('modal-title'); const modalBody = document.getElementById('modal-body'); document.getElementById('close').addEventListener('click',closeModal); backdrop.addEventListener('click',e=>{if(e.target===backdrop) closeModal();}); function openArticleById(id){const a=articles.find(x=>x.id===id); if(!a) return; modalTitle.textContent=a.title; modalBody.innerHTML=`<p style='margin-top:0'>${a.excerpt}</p><hr><p>‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÄ‡∏ï‡πá‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‚Äî ‡πÄ‡∏û‡∏¥‡πà‡∏° PDF, ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡πÑ‡∏î‡πâ</p><p style='color:var(--muted);font-size:13px'>‡πÅ‡∏ó‡πá‡∏Å: ${a.tags.join(', ')}</p>`; backdrop.style.display='flex'; backdrop.setAttribute('aria-hidden','false'); } function closeModal(){backdrop.style.display='none'; backdrop.setAttribute('aria-hidden','true');}

    // theme toggle
    const themeToggle = document.getElementById('theme-toggle'); function setTheme(t){ if(t==='dark') document.documentElement.setAttribute('data-theme','dark'); else document.documentElement.removeAttribute('data-theme'); localStorage.setItem('mk_theme',t);} themeToggle.addEventListener('click',()=>{const cur=localStorage.getItem('mk_theme')||'light'; const next=cur==='light'?'dark':'light'; setTheme(next); themeToggle.textContent = next==='dark'?'‚òÄÔ∏è':'üåô';}); (function(){const t=localStorage.getItem('mk_theme')||'light'; setTheme(t); themeToggle.textContent = t==='dark'?'‚òÄÔ∏è':'üåô';})();

    // new article demo + top button
    document.getElementById('new-article').addEventListener('click',()=>{const title=prompt('‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)'); if(!title) return; const id=Math.max(0,...articles.map(a=>a.id))+1; const now=new Date().toISOString().split('T')[0]; const newA={id,title,subject:'‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',tags:['‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'],date:now,popular:0,excerpt:'‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‚Äî ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÑ‡∏î‡πâ'}; articles.unshift(newA); filterAndRender(); const bm=getBookmarks(); bm.push(id); saveBookmarks(bm); alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ üéâ');}); document.getElementById('to-top').addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));

    // search & sort events
    searchInput.addEventListener('input',()=>filterAndRender()); sortSelect.addEventListener('change',()=>filterAndRender());

    // init
    function init(){ renderSubjects(); filterAndRender(); renderBookmarks(); }
    init();
  </script>
</body>
</html>
